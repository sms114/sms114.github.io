---
layout: single
title:  "[Q&A] Q & A AWS 보조 설명"
categories: [ AWS]
tag: [ AWS, 크몽 ]
author_profile: false
typora-root-url: ../
toc: true
toc_sticky: true
toc_label: "목차"
toc_icon: "fas fa-utensils" 
remove_sidebar: true
##sidebar:
##   nav: "counts"
search: true
---



## Q1. ELB설정시, 네트워크 매핑 단계에서 가용 영역(AZ, Availability Zone)을 2개 이상 선택의 의미

## **1️⃣ 가용 영역(Availability Zone, AZ)란?**

AWS는 하나의 리전(Region)을 여러 가용 영역(AZ)으로 나눠놨어.
각 AZ는 서로 다른 데이터 센터에 위치해서 독립적인 전력, 네트워크, 냉각 시스템을 사용해.
즉, 하나의 AZ에서 문제가 생겨도 다른 AZ는 정상적으로 작동할 수 있도록 설계된 거지! 🙌

------

## **2️⃣ 왜 AZ를 2개 이상 선택해야 할까?**

ELB는 트래픽을 여러 서버로 분산시키는 역할을 하잖아?
만약 한 AZ에서 장애가 발생하면, ELB가 다른 AZ의 서버로 요청을 자동으로 보내면서 **서비스 중단 없이 안정적으로 운영**할 수 있어.
👉 그래서 **2개 이상의 AZ를 선택**해야 고가용성을 보장할 수 있어!

------

## **3️⃣ AZ 선택 방법**

### 네트워크 매핑 단계에서:

1. **VPC 선택**
   - VPC는 이미 EC2 인스턴스를 배치한 VPC를 선택하면 돼.
2. **가용 영역(AZ) 선택**
   - 제공되는 AZ 리스트에서 **2개 이상의 AZ**를 선택해.
     (예: `ap-northeast-2a`, `ap-northeast-2b`)
3. **서브넷(Subnet) 매핑**
   - 각 AZ에 연결된 서브넷을 선택해야 해.
   - 서브넷은 **퍼블릭 서브넷**(인터넷과 연결 가능)이어야 ELB가 외부 요청을 받을 수 있어.

------

## **4️⃣ 실전 팁**

- **EC2 인스턴스가 있는 AZ 선택하기**
  ELB가 선택한 AZ의 서브넷에만 트래픽을 분산시키니까, EC2 인스턴스가 배치된 AZ를 선택해야 해!
  👉 예를 들어, `ap-northeast-2a`와 `ap-northeast-2b`에 EC2가 있다면 이 두 AZ를 선택하면 돼.
- **EC2가 하나의 AZ에만 있는 경우?**
  그래도 **다른 AZ를 추가 선택**할 수 있어.
  나중에 다른 AZ에 EC2 인스턴스를 추가 배포하면, ELB가 자동으로 새 인스턴스도 트래픽 분산 대상에 포함해줘!

------

## **5️⃣ 요약**

1. **최소 2개의 AZ와 서브넷 선택.**
2. **EC2 인스턴스가 있는 AZ 우선 선택.**
3. 서브넷은 반드시 **퍼블릭 서브넷**이어야 함.



## Q2. [AWS] 로그밸런스 구축하기 그림으로 이해시키기(ELB)

[AWS로드밸런스 구축 이해 참조 사이트](https://rachel0115.tistory.com/entry/AWS-%EB%A1%9C%EB%93%9C-%EB%B0%B8%EB%9F%B0%EC%84%9C-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0-ELB)

# **Elastic Load Balancing (ELB)란?**

**Elastic Load Balancing(ELB)**은 **둘 이상의 가용 영역**에서 **EC2 인스턴스**, **컨테이너**, **IP 주소** 등 여러 대상에 걸쳐 수신되는 트래픽을 자동으로 분산시켜주는 역할을 합니다.

등록된 대상의 상태를 모니터링하면서 상태가 **양호한 대상으로**만 트래픽을 라우팅합니다. **Elastic Load Balancing**은 수신 트래픽의 변화에 따라 로드 밸런서 용량을 자동으로 조정합니다.



![image-20250122124227777](/../images/2025-01-22-002-AWS작업_보조QA/image-20250122124227777.png)

ELB는 다음 그림과 같이 가용 영역이 다른 여러 서브넷에 여러대의 인스턴스가 있는 상태에서, 각 인스턴스의 상태를 확인하고 이에 따라 트래픽을 분산시켜주는 역할을 합니다. 만약 ELB가 없었다면, 특정 서버에만 트래픽이 몰려 인스턴스가 죽어버리는 상황이 발생할 수 있겠죠. 결국, 로드밸런서는 서버의 부하를 분산시켜주는 업무를 수행한다고 볼 수 있습니다.

이와 같은 **로드 밸런싱의 특징**은 다음과 같습니다.

- **고가용성**
  - 트래픽을 다수의 대상으로 분산하여 고가용성을 유지
- **상태확인**
  - 로드 밸런싱이 적용된 인스턴스의 상태를 주기적으로 확인
- **보안 기능**
  - 로드 밸런서에도 보안 그룹을 지정할 수 있음 (80포트 또는 443포트)
- **4계층/7계층 로드밸런싱**
  - HTTP/HTTPS의 7계층의 애플리케이션 로드 밸런싱과 TCP/UDP의 4계층 로드 밸런싱을 사용할 수 있음
- **운영 모니터링**
  - Cloud Watch에 모니터링, S3에 로그를 저장 등 상황에 따라 ELB 애플리케이션의 성능을 실시간으로 모니터링 할 수 있음



---



![image-20250122124430650](/../images/2025-01-22-002-AWS작업_보조QA/image-20250122124430650.png)

---



**1.** 클라이언트가 애플리케이션에 **요청을 보냅니다.
**

**2. 로드밸런서의 리스너가 설정했던 프로토콜 및 포트에 맞는 요청을 수신합니다.**

**3.** 수신 수신기는 사용자가 지정한 규칙과 비교하여 수신 요청이 유효한지 확인하고, 유효한 경우 **해당 요청을** **적절한 대상 그룹으로 라우팅합니다**. HTTPS 수신기를 사용하여 TLS 암호화 및 암호 해독 작업을 로드 밸런서로 오프로드할 수 있습니다.

**4.** 대상 그룹에 있는 하나 이상의 정상적인 서버는 로드 밸런싱 알고리즘 및 수신기에서 지정한 라우팅 규칙에 따라 트래픽을 수신합니다.

---



로드밸런싱 목적이 부하를 분산시켜주기위한 목적이기 때문에 특정 리전(가용 영역)에 문제가 생겼을 때 다른 리전으로 트래픽을 분산시켜줄 수 있어야 합니다. 따라서, 로드밸런서를 적용하기 위해선 아래처럼 가용 영역이 다른 최소 2개 이상의 **Subnet**이 필요합니다.

---

![image-20250122124613354](/../images/2025-01-22-002-AWS작업_보조QA/image-20250122124613354.png)

---

![image-20250122124627273](/../images/2025-01-22-002-AWS작업_보조QA/image-20250122124627273.png)