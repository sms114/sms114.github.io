---
layout: single
title:  "[platform] íšŒì›ê°€ì…ê³¼ ë¡œê·¸ì¸ - php í”„ë¡œê·¸ë¨ ê¸°ë¡"
categories: [ platform ]
tag: [ platform, CodeIgniter ]
author_profile: false
typora-root-url: ../
toc: true
toc_sticky: true
toc_label: "ëª©ì°¨"
toc_icon: "fas fa-utensils" 
remove_sidebar: true
##sidebar:
##   nav: "counts"
search: true
---

#

# 1. ì½”ë“œì´ê·¸ë‚˜ì´íŠ¸ í”„ë¡œê·¸ë¨ ìƒì„± íë¦„ ë©”ëª¨



### 1. ì»¨íŠ¸ë¡¤ëŸ¬ Main.php Loading.

/application/controllers/Main.php

```php
<?php
defined('BASEPATH') OR exit('No direct script access allowed');

class Main extends CI_Controller {

	public function index()
	{
		$this->load->view('main');
	}

    public function test1(){
        echo 'aaaaaa';
    }
}

```

### 2. ë·°, main.php

/application/views/main.php

```php
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë©”ì¸</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- ì´ê²ƒì€ ì•ˆ ë„£ì–´ë„ ë¨     
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
 -->    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">
    <style>
        body{font-family: 'Noto Sans KR', sans-serif;}
       .login_box{max-width:350px;margin:0 auto;} 
       .input_wrap{font-size:12px;margin-bottom:10px;}
       .input_wrap input{width:100%;height:26px;border:0px;border-bottom:solid #000 1px;}
       .login_box .join_text{font-size:12px;text-align:center;with:100%;margin-top:10px;}
       .login_box .join_text span{text-decoration:underline;font-weight:600px;cursor:pointer;}

       .join_box .login_text{font-size:12px;text-align:center;with:100%;margin-top:10px;}
       .join_box .login_text span{text-decoration:underline;font-weight:600px;cursor:pointer;}

       .login_box .email{}
       .login_box .pwd{}
       .join_box{max-width:350px;margin:0 auto;display:none;}
       .join_box .j_email{}
       .join_box .j_pwd{}
       .join_box .j_pwdcf{}
       .join_box .j_name{}
       .login_btn{border:solid #000 1px;width:100%;height:32px;line-height:32px;text-align:center;cursor:pointer;border-radius:8px;}
       .join_btn{border:solid #000 1px;width:100%;height:32px;line-height:32px;text-align:center;cursor:pointer;border-radius:8px;}
       .page_title{font-size:18px;font-weight:500;text-align:center;width:100%;margin-top:30px;margin-bottom:5px;}
       .site_title{font-size:20px;font-weight:700;text-align:center;width:100%;margin-bottom:20px;}
    </style>
</head>

<body>
    <div class="page_title">ë¬´ì—‡ì´ë“  ì ì–´ë‘ì„¸ìš”.</div>
    <div class="site_title">ë¡œê·¸</div>

    <div class="login_box">
        <div class="input_wrap"> ì´ë©”ì¼ <input type="email" class="email" > </div>
        <div class="input_wrap"> íŒ¨ìŠ¤ì›Œë“œ <input type="password" class="pwd" > </div>
        <div class="login_btn">ë¡œê·¸ì¸</div>
        <div class="join_text">ì•„ì§ ê°€ì…í•˜ì§€ ì•Šìœ¼ì…¨ë‚˜ìš”? <span>íšŒì›ê°€ì…</span></div>
    </div>

    <div class="join_box">
        <div class="input_wrap"> ì´ë©”ì¼ <input type="email" class="j_email" > </div>
        <div class="input_wrap"> íŒ¨ìŠ¤ì›Œë“œ <input type="password" class="j_pwd" > </div>
        <div class="input_wrap"> íŒ¨ìŠ¤ì›Œë“œ í™•ì¸ <input type="password" class="j_pwdcf" > </div>
        <div class="input_wrap"> ì´ë¦„ <input type="text" class="j_name" > </div>
        <div class="join_btn">íšŒì›ê°€ì…</div>
        <div class="login_text">ì´ë¯¸ ê°€ì…í•˜ì…¨ë‚˜ìš”? <span>ë¡œê·¸ì¸</span></div>
    </div>

    <script>
        $(document).ready(function(){
            $('.join_text span').click(function(){
                $('.login_box').hide();
                //$('.join_box').fadeIn();
                //$('.join_box').fadeIn(5000);
                $('.join_box').show();
            });

            $('.login_text span').click(function(){
                $('.join_box').hide();
                //$('.join_box').fadeIn();
                //$('.join_box').fadeIn(5000);
                $('.login_box').show();
            });

            $('.login_btn').click(function(){
                //alert('ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­');
                lemail = $('.email').val();
                lpwd = $('.pwd').val();
 

                if(lemail == ''){
                    alert('ì´ë©”ì¼ì„ ê¸°ì… í•´ ì£¼ì„¸ìš”.');
                    $('.email').focus();
                    return false;
                }else if(lpwd == ''){
                    alert('íŒ¨ìŠ¤ì›Œë“œë¥¼ ì…ë ¥ í•´ ì£¼ì„¸ìš”.');
                    $('.pwd').focus();
                    return false;
                }

                $.ajax({
                    url: '/api/member_login',         
                    type: 'POST',              
                    //dataType: 'json',        
                    data: { 
                        'email': lemail,
                        'pwd': lpwd
                    },
                    success: function(response) {
                        console.log('Success:', response);
                    },
                    error: function(xhr, status, error) {
                        console.error("Error:", error);
                    }
                });                

            });

            $('.join_btn').click(function(){
                //alert('íšŒì›ê°€ì… ë²„íŠ¼ í´ë¦­');
                //alert($('.j_email').val());

                jemail = $('.j_email').val();
                jpwd = $('.j_pwd').val();
                jpwdcf = $('.j_pwdcf').val();
                jname = $('.j_name').val();

                if(jemail == ''){
                    alert('ì´ë©”ì¼ì„ ë„£ì–´ì£¼ì„¸ìš”.');
                    $('.j_email').focus();
                    return false;
                }else if(jpwd == ''){
                    alert('íŒ¨ìŠ¤ì›Œë“œë¥¼ ë„£ì–´ì£¼ì„¸ìš”.');
                    $('.j_pwd').focus();
                    return false;
                }else if(jpwdcf ==  ''){
                    alert('íŒ¨ìŠ¤ì›Œë“œ í™•ì¸ì„ ë„£ì–´ì£¼ì„¸ìš”.');
                    $('.j_pwdcf').focus();
                    return false;
                }else if(jname == ''){
                    alert('ì´ë¦„ì„ ë„£ì–´ì£¼ì„¸ìš”.');
                    $('.j_name').focus();
                    return false;
                }else if(jpwd != jpwdcf){
                    alert('íŒ¨ìŠ¤ì›Œë“œë¥¼ ë™ì¼í•˜ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    $('.j_pwd').focus();
                    return false;
                }

                $.ajax({
                    //console.log('ajax-----íšŒì›ê°€ì… ë²„íŠ¼ í´ë¦­');
                    url: 'api/member_join',         
                    type: 'POST',              
                    dataType: 'json',        
                    data: {'email': jemail,'pwd': jpwd,'name': jname},
                    beforeSend: function() {
                        console.log("AJAX ìš”ì²­ ì‹œì‘!"); // ìš”ì²­ ì „ì— ì°ê¸°
                        console.log("ë³´ë‚¼ ë°ì´í„°:", {'email': jemail, 'pwd': jpwd, 'name': jname});
                    },
                    success: function(response) {
                        console.log("AJAX ìš”ì²­ ì„±ê³µ! ğŸ‰");
                        console.log(response);
                    },
                    error: function(xhr, status, error) {
                        console.error("ì—ëŸ¬ë°œìƒ", error);
                    },
                    complete: function() {
                       console.log("AJAX ìš”ì²­ ì™„ë£Œ."); // ì„±ê³µ/ì‹¤íŒ¨ ì—¬ë¶€ ìƒê´€ì—†ì´ ì‹¤í–‰
                    }
                });
     
            });
        });
    </script>
</body>
</html>



```

### 3. Ajax /api/member_join í˜¸ì¶œ

/application/controllers/Api.php , member_join() function() í˜¸ì¶œ

```php
<?php
defined('BASEPATH') OR exit('No direct script access allowed');

class Api extends CI_Controller {


    function __construct() {
        parent::__construct();
        /* $this->load->model('Member_m'); */
    }

    public function test2(){
        echo 'aaaaaa';
    }

    function member_join(){

        //echo 'aaaaaa';

        $req = $this->input->post();

        $set['email'] = isset($req['email']) ? $req['email'] : '';
        $set['name'] = isset($req['name']) ? $req['name'] : '';
        $set['pwd'] = isset($req['pwd']) ? $req['pwd'] : '';

        $set['pwd'] = md5($set['pwd']);
        $this->load->model('member_m');
 
        //$data['response_data'] = $set;
        $data['response_data'] = $this->member_m->member_join($set);

        $data['response_result'] = array(
            'result_code' => "200",
            'result_message' => "ok"
        );

        echo json_encode($data);
    }
}


```

### 4. Model Member_m.php í˜¸ì¶œ

```php
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Member_m extends CI_Model {

    /*ìƒì„±ì*/
    function __construct() {
        parent::__construct();
    }

    function member_join($set){

        //$this->db->set('regdate', 'now()', false);
        
        $this->db->insert('lg_member', $set);
        $insert_id = $this->db->insert_id();
        return $insert_id;
        

    }
}
```



### í•„ìˆ˜ì  ì¡°ì¹˜ , /application/config/autoload.php ì—ì„œ ì•„ë˜ ì„¤ì • ì¶”ê°€

/application/config/autoload.phpì—ì„œ session, database ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ìë™ load ë˜ê²Œë” ì„¤ì •ì²˜ë¦¬

```php
$autoload['libraries'] = array('session','database');

```

